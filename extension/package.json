{
  "name": "flowbaby",
  "displayName": "Flowbaby",
  "description": "Automatic memory for GitHub Copilot chat using Flowbaby knowledge graphs",
  "version": "0.4.9",
  "publisher": "flowbaby",
  "icon": "media/icon.png",
  "engines": {
    "vscode": "^1.106.0"
  },
  "categories": [
    "AI",
    "Chat",
    "Machine Learning"
  ],
  "keywords": [
    "flowbaby",
    "memory",
    "chat",
    "copilot",
    "knowledge-graph",
    "context",
    "ai",
    "llm",
    "context-retrieval"
  ],
  "activationEvents": [
    "onStartupFinished",
    "onLanguageModelTool:flowbaby_storeMemory"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "Flowbaby.captureMessage",
        "title": "Flowbaby: Capture to Memory",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.toggleMemory",
        "title": "Flowbaby: Toggle Memory",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.clearMemory",
        "title": "Flowbaby: Clear Workspace Memory",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.ingestForAgent",
        "title": "Flowbaby: Ingest Summary for Agent",
        "category": "Flowbaby",
        "enablement": "Flowbaby.enabled"
      },
      {
        "command": "Flowbaby.retrieveForAgent",
        "title": "Flowbaby: Retrieve Context for Agent",
        "category": "Flowbaby",
        "enablement": "Flowbaby.enabled"
      },
      {
        "command": "Flowbaby.backgroundStatus",
        "title": "Flowbaby: View Background Operations",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.showStatus",
        "title": "Flowbaby: Show Status",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.openDocs",
        "title": "Flowbaby: Open Documentation",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.validateMemories",
        "title": "Flowbaby: Validate Memories",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.listMemories",
        "title": "Flowbaby: List Memories",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.refreshDependencies",
        "title": "Flowbaby: Refresh Bridge Dependencies",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.initializeWorkspace",
        "title": "Flowbaby: Initialize Workspace",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.setupEnvironment",
        "title": "Flowbaby: Setup Environment (Legacy)",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.configureApiKey",
        "title": "Flowbaby: Configure API Key",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.setApiKey",
        "title": "Flowbaby: Set API Key",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.clearApiKey",
        "title": "Flowbaby: Clear API Key",
        "category": "Flowbaby"
      },
      {
        "command": "Flowbaby.showDebugLogs",
        "title": "Flowbaby: Show Debug Logs",
        "category": "Flowbaby"
      }
    ],
    "keybindings": [
      {
        "command": "Flowbaby.captureMessage",
        "key": "ctrl+alt+c",
        "mac": "cmd+alt+c",
        "when": "editorTextFocus || chatIsVisible"
      }
    ],
    "chatParticipants": [
      {
        "id": "flowbaby",
        "name": "flowbaby",
        "description": "Chat with automatic context from Flowbaby memory",
        "isSticky": true
      }
    ],
    "languageModelTools": [
      {
        "name": "flowbaby_storeMemory",
        "displayName": "Store Memory in Flowbaby",
        "toolReferenceName": "flowbabyStoreSummary",
        "canBeReferencedInPrompt": true,
        "icon": "$(database)",
        "modelDescription": "Primary tool for writing episodic long-term memory into Flowbaby's knowledge graph. Agents should call this after meaningful progress, at the end of multi-step reasoning, or when concluding a task, to persist a rich summary of what was done and why. Use this tool proactively as a state checkpoint; do not wait for the user to explicitly ask to save memory. Summaries should be 300–1500 characters and describe goals, actions, important files, decisions, and rationale. Use it to record durable decisions, plans, and implementation notes that will be useful in future turns in this workspace. Do not use this for trivial or ephemeral chit-chat.\n\nExample usage (conceptual): after completing a refactor or design decision, call this tool with topic=\"Auth refactor step 1\" and context summarizing the work, and include any key decisions and rationale. Data stays in this workspace.",
        "userDescription": "Store a structured conversation or work summary into Flowbaby's knowledge graph for future retrieval. Data stays in this workspace.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "topic": {
              "type": "string",
              "description": "Short 3–7 word title for this memory that clearly identifies the work or decision (e.g., \"Redis caching implementation plan\"). Do not put the full summary here."
            },
            "context": {
              "type": "string",
              "description": "A rich 300–1500 character summary describing the goal, what was done, key files or components, important details, and the reasoning behind the work. This acts as long-term memory and should be understandable if read weeks later."
            },
            "decisions": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Optional list (0–5 items) of durable decisions made in this session (e.g., \"Keep legacy hashing for backward compatibility\"). Only include decisions that will matter for future work."
            },
            "rationale": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Optional list (0–5 items) explaining why the decisions were made (e.g., trade-offs, constraints, or risk considerations)."
            },
            "metadata": {
              "type": "object",
              "properties": {
                "plan_id": {
                  "type": "string",
                  "description": "Optional identifier used to group related summaries or steps in a plan (e.g., \"memory-2025-01-15-auth-refactor\")."
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "Active",
                    "Superseded",
                    "DecisionRecord"
                  ],
                  "description": "Optional status describing whether this memory is the current approach (Active), has been replaced (Superseded), or is a stable decision record (DecisionRecord)."
                }
              },
              "description": "Optional metadata about this memory entry. If omitted, the system may auto-generate values. Use this to track plan IDs and status of decisions."
            }
          },
          "required": [
            "topic",
            "context"
          ]
        },
        "tags": [
          "memory",
          "knowledge-graph",
          "persistence",
          "flowbaby",
          "long-term-memory",
          "state-checkpoint"
        ]
      },
      {
        "name": "flowbaby_retrieveMemory",
        "displayName": "Retrieve Flowbaby Memory",
        "toolReferenceName": "flowbabyRetrieveMemory",
        "canBeReferencedInPrompt": true,
        "icon": "$(search)",
        "modelDescription": "Primary mechanism for retrieving past context, decisions, and implementation details from Flowbaby's knowledge graph. Agents should call this at the start of a turn, or before planning an answer, whenever the user request might relate to prior work, previous discussions, or existing decisions in this workspace. Use a natural-language query that describes the user goal or task (not just keywords), and retrieve a small number of highly relevant memories to ground reasoning. The tool returns human-readable markdown plus structured JSON with topic, context, decisions, rationale, and metadata, which should be used to guide current planning and responses. If no results are relevant, the agent should proceed but note that no prior memory was found.\n\nExample usage (conceptual): when asked \"How did we implement caching?\" call this tool with query=\"Previous decisions and implementation details for redis caching\" and review the returned summaries before answering. Data stays in this workspace.",
        "userDescription": "Search Flowbaby knowledge graph for relevant stored summaries, decisions, and context from past work. Data stays in this workspace.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "Natural-language description of what you want to recall, including the goal or task (e.g., \"Previous decisions about authentication strategy\", \"How we implemented Redis caching in this project\"). Avoid short keyword-only queries; instead, describe the intent and context."
            },
            "maxResults": {
              "type": "number",
              "description": "Maximum number of results to return (default: 3, max: 10)",
              "default": 3,
              "minimum": 1,
              "maximum": 10
            }
          },
          "required": [
            "query"
          ]
        },
        "tags": [
          "memory",
          "knowledge-graph",
          "search",
          "retrieval",
          "flowbaby",
          "context",
          "long-term-memory"
        ]
      }
    ],
    "walkthroughs": [
      {
        "id": "flowbabySetup",
        "title": "Get Started with Flowbaby",
        "description": "Set up your environment and start using Flowbaby",
        "steps": [
          {
            "id": "setupPython",
            "title": "Setup Python Environment",
            "description": "Flowbaby requires a Python environment with `cognee` installed. We can set this up for you automatically.\n[Initialize Workspace](command:Flowbaby.initializeWorkspace)",
            "media": {
              "image": "media/icon.png",
              "altText": "Flowbaby Logo"
            },
            "completionEvents": [
              "onContext:Flowbaby.environmentVerified"
            ]
          },
          {
            "id": "configureApiKey",
            "title": "Configure API Key",
            "description": "Create a `.env` file in your workspace root with your LLM API key.\n[Configure API Key](command:Flowbaby.configureApiKey)",
            "media": {
              "markdown": "media/icon.png"
            },
            "completionEvents": [
              "onCommand:Flowbaby.configureApiKey"
            ]
          },
          {
            "id": "tryCapture",
            "title": "Try Capture",
            "description": "Select text in your editor and press `Ctrl+Alt+C` (or `Cmd+Alt+C` on Mac) to capture it to memory.",
            "completionEvents": [
              "onCommand:Flowbaby.captureMessage"
            ]
          },
          {
            "id": "tryRetrieval",
            "title": "Try Retrieval",
            "description": "Open Copilot Chat and ask `@flowbaby` a question about your captured context.",
            "completionEvents": [
              "onView:flowbaby"
            ]
          }
        ]
      }
    ],
    "configuration": {
      "title": "Flowbaby",
      "properties": {
        "Flowbaby.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable/disable automatic memory capture and retrieval"
        },
        "Flowbaby.maxContextResults": {
          "type": "number",
          "default": 3,
          "minimum": 1,
          "maximum": 10,
          "description": "Maximum number of memory results to retrieve"
        },
        "Flowbaby.maxContextTokens": {
          "type": "number",
          "default": 32000,
          "minimum": 100,
          "maximum": 100000,
          "description": "Maximum token budget for retrieved context (higher values may increase latency and memory usage; hard-clamped to 100k in the bridge)"
        },
        "Flowbaby.searchTopK": {
          "type": "number",
          "default": 10,
          "minimum": 1,
          "maximum": 100,
          "description": "Maximum number of candidates to request from the Flowbaby search engine before ranking. Values are normalized so they are never lower than maxContextResults and are hard-clamped to 100 in the bridge."
        },
        "Flowbaby.ranking.halfLifeDays": {
          "type": "number",
          "default": 7,
          "minimum": 0.5,
          "maximum": 90,
          "markdownDescription": "Half-life (in days) used for recency-aware ranking. Memories older than this value will have their relevance score halved. Leave between 0.5 and 90 days to balance freshness vs. semantic similarity."
        },
        "Flowbaby.autoIngestConversations": {
          "type": "boolean",
          "default": false,
          "markdownDescription": "**Experimental**: Automatically capture @flowbaby conversations for feedback loop. Currently disabled by default due to Cognee 0.4.0 file storage issues. Enable to test self-improving memory (may fail intermittently)."
        },
        "Flowbaby.pythonPath": {
          "type": "string",
          "default": "python3",
          "markdownDescription": "Path to Python interpreter. Leave as 'python3' for auto-detection of workspace `.venv`. Explicit path overrides auto-detection. Must have `cognee` and `python-dotenv` installed."
        },
        "Flowbaby.logLevel": {
          "type": "string",
          "enum": [
            "error",
            "warn",
            "info",
            "debug"
          ],
          "default": "info",
          "description": "Logging verbosity level"
        },
        "Flowbaby.debugLogging": {
          "type": "boolean",
          "default": false,
          "markdownDescription": "Enable debug output channel for extension diagnostics. Shows detailed logs for activation, Python bridge communication, setup operations, and status bar events. Use this when troubleshooting issues."
        },
        "Flowbaby.llm.provider": {
          "type": "string",
          "enum": [
            "openai",
            "anthropic",
            "azure",
            "ollama",
            "custom"
          ],
          "default": "openai",
          "markdownDescription": "LLM provider for memory processing. Non-OpenAI providers may require additional configuration in the endpoint field."
        },
        "Flowbaby.llm.model": {
          "type": "string",
          "default": "gpt-4o-mini",
          "markdownDescription": "LLM model name (e.g., gpt-4o-mini, claude-3-haiku-20240307, llama2)"
        },
        "Flowbaby.llm.endpoint": {
          "type": "string",
          "default": "",
          "markdownDescription": "Custom LLM endpoint URL (for Ollama, Azure, or self-hosted). Leave empty for default provider endpoints."
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "node esbuild.js --production",
    "compile:tests": "tsc -p tsconfig.test.json && cp src/test/run-test-agent.js out/test/",
    "pretest": "npm run compile:tests",
    "watch": "node esbuild.js --watch",
    "lint": "eslint src --ext ts",
    "test": "node ./out/test/runTest.js",
    "test:bridge": "cd bridge && pytest tests/ -v",
    "test:agent": "npm run compile:tests && node ./out/test/run-test-agent.js",
    "test:all": "npm test && npm run test:bridge",
    "package": "vsce package",
    "verify:vsix": "node scripts/verify-vsix.js *.vsix"
  },
  "devDependencies": {
    "@types/chai": "^5.2.3",
    "@types/glob": "^8.1.0",
    "@types/mocha": "^10.0.10",
    "@types/mock-fs": "^4.13.4",
    "@types/node": "^20.19.24",
    "@types/sinon": "^17.0.4",
    "@types/vscode": "^1.105.0",
    "@typescript-eslint/eslint-plugin": "^6.21.0",
    "@typescript-eslint/parser": "^6.21.0",
    "@vscode/test-electron": "^2.5.2",
    "chai": "^6.2.1",
    "esbuild": "^0.19.12",
    "eslint": "^8.57.1",
    "glob": "^11.0.3",
    "mocha": "^11.7.5",
    "mock-fs": "^5.5.0",
    "sinon": "^21.0.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.9.3"
  },
  "author": "Flowbaby Team",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/lsalsich/flowbaby.git"
  },
  "bugs": {
    "url": "https://github.com/lsalsich/flowbaby/issues"
  },
  "homepage": "https://github.com/lsalsich/flowbaby/tree/main/extension",
  "dependencies": {
    "dotenv": "^17.2.3"
  }
}
